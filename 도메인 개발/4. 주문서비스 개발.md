- OrderService.java

아래의 코드에서 주문 생성에만 Repository를 사용하여 값을 저장했다 

Delivery 도 있고 OrderItem 도 주문을 할때 같이 저장되어야 하는데?

이유는 Order 엔티티 작성 시 Delivery와 OrderItem에 cascade = CascadeType.ALL 옵션을 따로 저장로직인 Repository를 주지 않아도 같이 저장이 된다

```java

 public Long order(Long memberId, Long itemId, int count){
        //엔티티 조회
        Member member = memberRepository.findOne(memberId);
        Item item = itemRepository.findOne(itemId);

        // 배송정보 생성(회원 주소 넣기)
        Delivery delivery = new Delivery();
        delivery.setAddress(member.getAddress());

        // 주문상품 생성
        OrderItem orderItem = OrderItem.createOrderItem(item, item.getPrice(), count);

        // 주문 생성
        Order order = Order.createOrder(member, delivery, orderItem);

        // 주문 저장
        orderRepository.save(order);
        return order.getId();


    }

```

- Tip(CascadeType)

CascadeType은 언제 사용해야 하나? 

참조하는 것이 하나일때, 다시말해 현재 로직에서는 Delivery와 OrderItem을 order에서만 참조해서 사용한다

하지만 이게 아니라 만약 Delivery가 중요해서 다른 곳에서도 참조하고 가져다 쓸 때는 지양해야 한다.


* 참고: 주문 서비스의 주문과 주문 취소 메서드를 보면 비즈니스 로직 대부분이 엔티티에 있다. 서비스 계층
은 단순히 엔티티에 필요한 요청을 위임하는 역할을 한다. 이처럼 엔티티가 비즈니스 로직을 가지고 객체 지
향의 특성을 적극 활용하는 것을 도메인 모델 패턴(http://martinfowler.com/eaaCatalog/
domainModel.html)이라 한다. 반대로 엔티티에는 비즈니스 로직이 거의 없고 서비스 계층에서 대부분
의 비즈니스 로직을 처리하는 것을 트랜잭션 스크립트 패턴(http://martinfowler.com/eaaCatalog/
transactionScript.html)이라 한다
